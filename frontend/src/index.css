@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   Magazzino Caos Ordinato - Design System
   ============================================ */

/* Base Styles */
html {
  scroll-behavior: smooth;
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  min-height: 100vh;
  min-height: 100dvh; /* Dynamic viewport height per mobile */
  overscroll-behavior: none;
}

/* Prevent pull-to-refresh su mobile */
body.prevent-overscroll {
  overscroll-behavior-y: contain;
}

/* ============================================
   Component Classes
   ============================================ */

@layer components {
  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 
           px-4 py-3 rounded-xl font-semibold
           transition-all duration-200 ease-out
           active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  .btn-primary {
    @apply btn bg-gradient-to-r from-amber-500 to-orange-500 
           text-white shadow-lg shadow-amber-500/25
           hover:shadow-xl hover:shadow-amber-500/30
           active:from-amber-600 active:to-orange-600;
  }
  
  .btn-secondary {
    @apply btn bg-dark-700 text-white border border-dark-600
           hover:bg-dark-600 hover:border-dark-500;
  }
  
  .btn-danger {
    @apply btn bg-red-600 text-white
           hover:bg-red-500 active:bg-red-700;
  }
  
  .btn-ghost {
    @apply btn bg-transparent text-dark-300
           hover:bg-dark-800 hover:text-white;
  }
  
  .btn-icon {
    @apply p-3 rounded-full bg-dark-800/80 backdrop-blur-sm
           text-white transition-all duration-200
           hover:bg-dark-700 active:scale-90;
  }

  /* Cards */
  .card {
    @apply bg-dark-800 rounded-2xl border border-dark-700
           shadow-xl shadow-black/20;
  }
  
  .card-interactive {
    @apply card transition-all duration-200
           hover:border-dark-600 hover:shadow-2xl
           active:scale-[0.98];
  }

  /* Inputs */
  .input {
    @apply w-full px-4 py-3 rounded-xl
           bg-dark-900 border border-dark-700
           text-white placeholder-dark-500
           focus:outline-none focus:border-amber-500 focus:ring-1 focus:ring-amber-500
           transition-all duration-200;
  }
  
  .input-search {
    @apply input pl-12 pr-4;
  }

  /* HUD Overlay (per camera) */
  .hud-overlay {
    @apply absolute inset-0 pointer-events-none
           flex items-center justify-center;
  }
  
  .hud-label {
    @apply px-6 py-3 rounded-2xl
           bg-black/40 backdrop-blur-sm
           text-2xl font-bold text-white text-center
           border border-white/10;
  }

  /* Bottom Sheet */
  .bottom-sheet {
    @apply fixed inset-x-0 bottom-0 z-50
           bg-dark-800 rounded-t-3xl
           border-t border-dark-700
           shadow-2xl shadow-black/50
           transform transition-transform duration-300 ease-out;
  }
  
  .bottom-sheet-handle {
    @apply w-12 h-1.5 mx-auto mt-3 mb-2
           bg-dark-600 rounded-full;
  }

  /* Grid Layout */
  .item-grid {
    @apply grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3;
  }
  
  .item-card {
    @apply relative aspect-square rounded-xl overflow-hidden
           bg-dark-700 border border-dark-600
           transition-all duration-200
           hover:border-dark-500 hover:shadow-lg
           active:scale-95;
  }
  
  .item-card-image {
    @apply w-full h-full object-cover;
  }
  
  .item-card-overlay {
    @apply absolute inset-x-0 bottom-0
           bg-gradient-to-t from-black/80 to-transparent
           p-2 pt-8;
  }

  /* Status Badges */
  .badge {
    @apply inline-flex items-center gap-1 px-2 py-0.5
           rounded-full text-xs font-medium;
  }
  
  .badge-available {
    @apply badge bg-green-500/20 text-green-400;
  }
  
  .badge-in-hand {
    @apply badge bg-amber-500/20 text-amber-400;
  }
  
  .badge-lost {
    @apply badge bg-red-500/20 text-red-400;
  }

  /* Loading States */
  .skeleton {
    @apply animate-pulse bg-dark-700 rounded;
  }
  
  .spinner {
    @apply w-6 h-6 border-2 border-dark-600 border-t-amber-500
           rounded-full animate-spin;
  }

  /* Toast / Feedback */
  .toast {
    @apply fixed bottom-20 left-1/2 -translate-x-1/2 z-50
           px-4 py-3 rounded-xl
           bg-dark-700 border border-dark-600
           text-white text-sm font-medium
           shadow-2xl shadow-black/50
           animate-bounce-gentle;
  }
  
  .toast-success {
    @apply toast border-green-500/50 bg-green-900/50;
  }
  
  .toast-error {
    @apply toast border-red-500/50 bg-red-900/50;
  }
}

/* ============================================
   Utilities
   ============================================ */

@layer utilities {
  /* Safe area padding per iPhone notch */
  .safe-top {
    padding-top: env(safe-area-inset-top, 0);
  }
  
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }
  
  /* No scrollbar */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  /* Text truncate */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* Prevent text selection on interactive elements */
  .no-select {
    user-select: none;
    -webkit-user-select: none;
  }
}

/* ============================================
   Camera & Scanner Specific
   ============================================ */

/* Camera view fullscreen */
.camera-container {
  position: fixed;
  inset: 0;
  z-index: 40;
  background: black;
}

.camera-video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* QR Scanner overlay */
.scanner-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.scanner-frame {
  width: 250px;
  height: 250px;
  border: 3px solid rgba(251, 191, 36, 0.8);
  border-radius: 24px;
  box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
}

.scanner-frame.detected {
  border-color: #22c55e;
  animation: pulse 0.3s ease-out;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.02); }
}

/* ============================================
   Animations
   ============================================ */

@keyframes slide-up {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

.animate-fade-in {
  animation: fade-in 0.2s ease-out;
}
